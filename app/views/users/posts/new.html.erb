<%= form_for(@post, url: posts_path, method: :POST) do |f| %>
<form>
  <div class="row">

      <div class="col-xs-12 col-lg-5">
        <div class="img_box">
        <%= attachment_image_tag @post, :image, fallback: "no-image.jpg", id: "img_prev", format: 'jpeg', size:"400x350" %>
        <%= f.attachment_field :image %>
        </div>

      <div class="col">
        <div class="form-group">
          <%= f.label "花火大会名" %><br>
          <%= f.text_field :festival,size: "40",placeholder: "隅田川花火大会" %>
        </div>
        <div class="form-group">
         <!-- 評価 -->
            <div id="star">
              <%= f.label :rate,'評価 '%>
              <%= f.hidden_field :rate, id: :review_star %>
            </div>

         <!-- 評価javascript -->
            <script>
               $(function(){
            //何かしらの処理
            $('#star').raty({
              size     : 36,
              starOff:  '<%= asset_path('star-off.png') %>',
              starOn : '<%= asset_path('star-on.png') %>',
              starHalf: '<%= asset_path('star-half.png') %>',
              // Postモデルのrateカラムに値を保存する
              scoreName: 'post[rate]',
              half: true,
            });
          }); 
            </script>
        </div>
        <div class="form-group">
          <%= f.label "行った日付" %><br>
          <%= f.date_select :date, {end_year: Time.now.year, start_year:1990, use_month_numbers: true} %>
        </div>
        <div class="form-group">
          <%= f.label "都道府県" %><br>
          <%= f.select :prefecture, Post.prefectures.keys, {} %>
        </div>
        <div class="form-group">
          <%= f.label "市区町村名" %><br>
          <%= f.text_field :city,size: "40",placeholder: "江東区" %>
        </div>
        <div class="form-group">
          <%= f.label "おすすめの行き方" %><br>
          <%= f.text_field :transportation,size: "60"%>
        </div>
        <div class="form-group">
          <%= f.label "持っていくといいもの" %><br>
          <%= f.text_field :belongings, size: "60" %>
        </div>
        <div class="form-group">
          <%= f.label "詳しく" %><br>
          <%= f.text_area :impressions, size: "60x10" %>
        </div>
        <div class="form-group">
          <%= f.select :status, [["下書き", "draft"],["公開", "published"]], id: "status", class: "form-control" %>
          <%= f.submit('保存',class: 'btn btn-dark')%>
          <input type="hidden" id="lat" name="latitude" value="">
          <input type="hidden" id="lng" name="longitude" value="">
        </div>
      </div>

  </div>
</form>
<% end %>

<!-- Googleマップ -->
          <%= form_with(model: @post, local: true, multipart: true) do |f| %>
            <div class="spot">
              <%= f.fields_for :spot do |s| %>
                <%= s.label :address, "レビュー場所", class: 'spot__title' %>
                <%= s.text_field :address, placeholder: "スポットを入力", id: "address", class: 'spot__text' %>
                <input type="button" onclick="codeAddress()" value="検索する">
                <div class="map" id="map" style="height: 350px; width: 350px;"></div>
              <% end %>
            </div>
          <% end %>
      </div>

      <script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAP_KEY']%>"></script>
      <script src="//cdn.rawgit.com/mahnunchik/markerclustererplus/master/dist/markerclusterer.min.js"></script>
      <script src="//cdn.rawgit.com/printercu/google-maps-utility-library-v3-read-only/master/infobox/src/infobox_packed.js" type="text/javascript"></script>
